{"ast":null,"code":"// src/queryCache.ts\nimport { hashQueryKeyByOptions, matchQuery } from \"./utils.js\";\nimport { Query } from \"./query.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { Subscribable } from \"./subscribable.js\";\nvar QueryCache = class extends Subscribable {\n  constructor(config = {}) {\n    super();\n    this.config = config;\n    this.#queries = /* @__PURE__ */new Map();\n  }\n  #queries;\n  build(client, options, state) {\n    const queryKey = options.queryKey;\n    const queryHash = options.queryHash ?? hashQueryKeyByOptions(queryKey, options);\n    let query = this.get(queryHash);\n    if (!query) {\n      query = new Query({\n        client,\n        queryKey,\n        queryHash,\n        options: client.defaultQueryOptions(options),\n        state,\n        defaultOptions: client.getQueryDefaults(queryKey)\n      });\n      this.add(query);\n    }\n    return query;\n  }\n  add(query) {\n    if (!this.#queries.has(query.queryHash)) {\n      this.#queries.set(query.queryHash, query);\n      this.notify({\n        type: \"added\",\n        query\n      });\n    }\n  }\n  remove(query) {\n    const queryInMap = this.#queries.get(query.queryHash);\n    if (queryInMap) {\n      query.destroy();\n      if (queryInMap === query) {\n        this.#queries.delete(query.queryHash);\n      }\n      this.notify({\n        type: \"removed\",\n        query\n      });\n    }\n  }\n  clear() {\n    notifyManager.batch(() => {\n      this.getAll().forEach(query => {\n        this.remove(query);\n      });\n    });\n  }\n  get(queryHash) {\n    return this.#queries.get(queryHash);\n  }\n  getAll() {\n    return [...this.#queries.values()];\n  }\n  find(filters) {\n    const defaultedFilters = {\n      exact: true,\n      ...filters\n    };\n    return this.getAll().find(query => matchQuery(defaultedFilters, query));\n  }\n  findAll(filters = {}) {\n    const queries = this.getAll();\n    return Object.keys(filters).length > 0 ? queries.filter(query => matchQuery(filters, query)) : queries;\n  }\n  notify(event) {\n    notifyManager.batch(() => {\n      this.listeners.forEach(listener => {\n        listener(event);\n      });\n    });\n  }\n  onFocus() {\n    notifyManager.batch(() => {\n      this.getAll().forEach(query => {\n        query.onFocus();\n      });\n    });\n  }\n  onOnline() {\n    notifyManager.batch(() => {\n      this.getAll().forEach(query => {\n        query.onOnline();\n      });\n    });\n  }\n};\nexport { QueryCache };","map":{"version":3,"names":["hashQueryKeyByOptions","matchQuery","Query","notifyManager","Subscribable","QueryCache","constructor","config","queries","Map","build","client","options","state","queryKey","queryHash","query","get","defaultQueryOptions","defaultOptions","getQueryDefaults","add","has","set","notify","type","remove","queryInMap","destroy","delete","clear","batch","getAll","forEach","values","find","filters","defaultedFilters","exact","findAll","Object","keys","length","filter","event","listeners","listener","onFocus","onOnline"],"sources":["E:/Projects/pokemon-angular-2025/node_modules/@tanstack/query-core/build/modern/queryCache.js"],"sourcesContent":["// src/queryCache.ts\nimport { hashQueryKeyByOptions, matchQuery } from \"./utils.js\";\nimport { Query } from \"./query.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { Subscribable } from \"./subscribable.js\";\nvar QueryCache = class extends Subscribable {\n  constructor(config = {}) {\n    super();\n    this.config = config;\n    this.#queries = /* @__PURE__ */ new Map();\n  }\n  #queries;\n  build(client, options, state) {\n    const queryKey = options.queryKey;\n    const queryHash = options.queryHash ?? hashQueryKeyByOptions(queryKey, options);\n    let query = this.get(queryHash);\n    if (!query) {\n      query = new Query({\n        client,\n        queryKey,\n        queryHash,\n        options: client.defaultQueryOptions(options),\n        state,\n        defaultOptions: client.getQueryDefaults(queryKey)\n      });\n      this.add(query);\n    }\n    return query;\n  }\n  add(query) {\n    if (!this.#queries.has(query.queryHash)) {\n      this.#queries.set(query.queryHash, query);\n      this.notify({\n        type: \"added\",\n        query\n      });\n    }\n  }\n  remove(query) {\n    const queryInMap = this.#queries.get(query.queryHash);\n    if (queryInMap) {\n      query.destroy();\n      if (queryInMap === query) {\n        this.#queries.delete(query.queryHash);\n      }\n      this.notify({ type: \"removed\", query });\n    }\n  }\n  clear() {\n    notifyManager.batch(() => {\n      this.getAll().forEach((query) => {\n        this.remove(query);\n      });\n    });\n  }\n  get(queryHash) {\n    return this.#queries.get(queryHash);\n  }\n  getAll() {\n    return [...this.#queries.values()];\n  }\n  find(filters) {\n    const defaultedFilters = { exact: true, ...filters };\n    return this.getAll().find(\n      (query) => matchQuery(defaultedFilters, query)\n    );\n  }\n  findAll(filters = {}) {\n    const queries = this.getAll();\n    return Object.keys(filters).length > 0 ? queries.filter((query) => matchQuery(filters, query)) : queries;\n  }\n  notify(event) {\n    notifyManager.batch(() => {\n      this.listeners.forEach((listener) => {\n        listener(event);\n      });\n    });\n  }\n  onFocus() {\n    notifyManager.batch(() => {\n      this.getAll().forEach((query) => {\n        query.onFocus();\n      });\n    });\n  }\n  onOnline() {\n    notifyManager.batch(() => {\n      this.getAll().forEach((query) => {\n        query.onOnline();\n      });\n    });\n  }\n};\nexport {\n  QueryCache\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}