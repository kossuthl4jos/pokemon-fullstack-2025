{"ast":null,"code":"// src/mutationObserver.ts\nimport { getDefaultState } from \"./mutation.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { Subscribable } from \"./subscribable.js\";\nimport { hashKey, shallowEqualObjects } from \"./utils.js\";\nvar MutationObserver = class extends Subscribable {\n  #client;\n  #currentResult = void 0;\n  #currentMutation;\n  #mutateOptions;\n  constructor(client, options) {\n    super();\n    this.#client = client;\n    this.setOptions(options);\n    this.bindMethods();\n    this.#updateResult();\n  }\n  bindMethods() {\n    this.mutate = this.mutate.bind(this);\n    this.reset = this.reset.bind(this);\n  }\n  setOptions(options) {\n    const prevOptions = this.options;\n    this.options = this.#client.defaultMutationOptions(options);\n    if (!shallowEqualObjects(this.options, prevOptions)) {\n      this.#client.getMutationCache().notify({\n        type: \"observerOptionsUpdated\",\n        mutation: this.#currentMutation,\n        observer: this\n      });\n    }\n    if (prevOptions?.mutationKey && this.options.mutationKey && hashKey(prevOptions.mutationKey) !== hashKey(this.options.mutationKey)) {\n      this.reset();\n    } else if (this.#currentMutation?.state.status === \"pending\") {\n      this.#currentMutation.setOptions(this.options);\n    }\n  }\n  onUnsubscribe() {\n    if (!this.hasListeners()) {\n      this.#currentMutation?.removeObserver(this);\n    }\n  }\n  onMutationUpdate(action) {\n    this.#updateResult();\n    this.#notify(action);\n  }\n  getCurrentResult() {\n    return this.#currentResult;\n  }\n  reset() {\n    this.#currentMutation?.removeObserver(this);\n    this.#currentMutation = void 0;\n    this.#updateResult();\n    this.#notify();\n  }\n  mutate(variables, options) {\n    this.#mutateOptions = options;\n    this.#currentMutation?.removeObserver(this);\n    this.#currentMutation = this.#client.getMutationCache().build(this.#client, this.options);\n    this.#currentMutation.addObserver(this);\n    return this.#currentMutation.execute(variables);\n  }\n  #updateResult() {\n    const state = this.#currentMutation?.state ?? getDefaultState();\n    this.#currentResult = {\n      ...state,\n      isPending: state.status === \"pending\",\n      isSuccess: state.status === \"success\",\n      isError: state.status === \"error\",\n      isIdle: state.status === \"idle\",\n      mutate: this.mutate,\n      reset: this.reset\n    };\n  }\n  #notify(action) {\n    notifyManager.batch(() => {\n      if (this.#mutateOptions && this.hasListeners()) {\n        const variables = this.#currentResult.variables;\n        const onMutateResult = this.#currentResult.context;\n        const context = {\n          client: this.#client,\n          meta: this.options.meta,\n          mutationKey: this.options.mutationKey\n        };\n        if (action?.type === \"success\") {\n          this.#mutateOptions.onSuccess?.(action.data, variables, onMutateResult, context);\n          this.#mutateOptions.onSettled?.(action.data, null, variables, onMutateResult, context);\n        } else if (action?.type === \"error\") {\n          this.#mutateOptions.onError?.(action.error, variables, onMutateResult, context);\n          this.#mutateOptions.onSettled?.(void 0, action.error, variables, onMutateResult, context);\n        }\n      }\n      this.listeners.forEach(listener => {\n        listener(this.#currentResult);\n      });\n    });\n  }\n};\nexport { MutationObserver };","map":{"version":3,"names":["getDefaultState","notifyManager","Subscribable","hashKey","shallowEqualObjects","MutationObserver","client","currentResult","currentMutation","mutateOptions","constructor","options","setOptions","bindMethods","updateResult","mutate","bind","reset","prevOptions","defaultMutationOptions","getMutationCache","notify","type","mutation","observer","mutationKey","state","status","onUnsubscribe","hasListeners","removeObserver","onMutationUpdate","action","getCurrentResult","variables","build","addObserver","execute","#updateResult","isPending","isSuccess","isError","isIdle","#notify","batch","onMutateResult","context","meta","onSuccess","data","onSettled","onError","error","listeners","forEach","listener"],"sources":["E:/Projects/pokemon-angular-2025/node_modules/@tanstack/query-core/build/modern/mutationObserver.js"],"sourcesContent":["// src/mutationObserver.ts\nimport { getDefaultState } from \"./mutation.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { Subscribable } from \"./subscribable.js\";\nimport { hashKey, shallowEqualObjects } from \"./utils.js\";\nvar MutationObserver = class extends Subscribable {\n  #client;\n  #currentResult = void 0;\n  #currentMutation;\n  #mutateOptions;\n  constructor(client, options) {\n    super();\n    this.#client = client;\n    this.setOptions(options);\n    this.bindMethods();\n    this.#updateResult();\n  }\n  bindMethods() {\n    this.mutate = this.mutate.bind(this);\n    this.reset = this.reset.bind(this);\n  }\n  setOptions(options) {\n    const prevOptions = this.options;\n    this.options = this.#client.defaultMutationOptions(options);\n    if (!shallowEqualObjects(this.options, prevOptions)) {\n      this.#client.getMutationCache().notify({\n        type: \"observerOptionsUpdated\",\n        mutation: this.#currentMutation,\n        observer: this\n      });\n    }\n    if (prevOptions?.mutationKey && this.options.mutationKey && hashKey(prevOptions.mutationKey) !== hashKey(this.options.mutationKey)) {\n      this.reset();\n    } else if (this.#currentMutation?.state.status === \"pending\") {\n      this.#currentMutation.setOptions(this.options);\n    }\n  }\n  onUnsubscribe() {\n    if (!this.hasListeners()) {\n      this.#currentMutation?.removeObserver(this);\n    }\n  }\n  onMutationUpdate(action) {\n    this.#updateResult();\n    this.#notify(action);\n  }\n  getCurrentResult() {\n    return this.#currentResult;\n  }\n  reset() {\n    this.#currentMutation?.removeObserver(this);\n    this.#currentMutation = void 0;\n    this.#updateResult();\n    this.#notify();\n  }\n  mutate(variables, options) {\n    this.#mutateOptions = options;\n    this.#currentMutation?.removeObserver(this);\n    this.#currentMutation = this.#client.getMutationCache().build(this.#client, this.options);\n    this.#currentMutation.addObserver(this);\n    return this.#currentMutation.execute(variables);\n  }\n  #updateResult() {\n    const state = this.#currentMutation?.state ?? getDefaultState();\n    this.#currentResult = {\n      ...state,\n      isPending: state.status === \"pending\",\n      isSuccess: state.status === \"success\",\n      isError: state.status === \"error\",\n      isIdle: state.status === \"idle\",\n      mutate: this.mutate,\n      reset: this.reset\n    };\n  }\n  #notify(action) {\n    notifyManager.batch(() => {\n      if (this.#mutateOptions && this.hasListeners()) {\n        const variables = this.#currentResult.variables;\n        const onMutateResult = this.#currentResult.context;\n        const context = {\n          client: this.#client,\n          meta: this.options.meta,\n          mutationKey: this.options.mutationKey\n        };\n        if (action?.type === \"success\") {\n          this.#mutateOptions.onSuccess?.(\n            action.data,\n            variables,\n            onMutateResult,\n            context\n          );\n          this.#mutateOptions.onSettled?.(\n            action.data,\n            null,\n            variables,\n            onMutateResult,\n            context\n          );\n        } else if (action?.type === \"error\") {\n          this.#mutateOptions.onError?.(\n            action.error,\n            variables,\n            onMutateResult,\n            context\n          );\n          this.#mutateOptions.onSettled?.(\n            void 0,\n            action.error,\n            variables,\n            onMutateResult,\n            context\n          );\n        }\n      }\n      this.listeners.forEach((listener) => {\n        listener(this.#currentResult);\n      });\n    });\n  }\n};\nexport {\n  MutationObserver\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}